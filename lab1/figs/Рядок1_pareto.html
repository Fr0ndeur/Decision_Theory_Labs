<!doctype html>
<html lang="uk"><head>
  <meta charset="utf-8"/><title>Рядок1: Границя Парето</title>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>body{margin:0;padding:0;font-family:system-ui,Segoe UI,Arial}</style>
</head><body>
  <div id="chart" style="width:960px;height:720px;margin:24px auto;"></div>
  <script>
    const jx  = [5,2,9.089549388960826,9,8,0,3,7,6,3,4,9,7,1,3,9,4,5.058305103054144,4.9372157486561745,9.113377775682055];
    const jy  = [2,1,3.083304837629389,0,9,9,1,3,4,5,8,5,7,3,3,8,9,5.05015781168304,5.113487355597609,2.9923917455341065];
    const labs= ["A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","A11","A12","A13","A14","A15","A16","A17","A18","A19","A20"];
    const mask= [false,false,false,false,true,false,false,false,false,false,false,false,false,false,false,true,false,false,false,false];
    const custom = [[5,2],[2,1],[9,3],[9,0],[8,9],[0,9],[3,1],[7,3],[6,4],[3,5],[4,8],[9,5],[7,7],[1,3],[3,3],[9,8],[4,9],[5,5],[5,5],[9,3]];
    const lineX = [8,9];
    const lineY = [9,8];
    const labelMode = "front";

    const allTrace = {
      x: jx, y: jy,
      mode: (labelMode === 'all') ? 'markers+text' : 'markers',
      text: labs,
      textposition: 'top left',
      textfont: { size: 10 },
      marker: { size: 7, opacity: 0.8, line: { width: 0.5 } },
      name: 'Усі альтернативи',
      hovertemplate: '<b>%{text}</b><br>Q1=%{customdata[0]}<br>Q2=%{customdata[1]}<extra></extra>',
      customdata: custom,
      cliponaxis: false
    };

    const frontTrace = {
      x: jx.filter((_,i)=>mask[i]),
      y: jy.filter((_,i)=>mask[i]),
      text: labs.filter((_,i)=>mask[i]),
      textposition: 'top center',
      textfont: { size: 12 },
      mode: (labelMode === 'none') ? 'markers' : 'markers+text',
      marker: { size: 11, symbol: 'diamond', opacity: 0.95, line: { width: 1 } },
      name: 'Фронт',
      hovertemplate: '<b>%{text}</b><br>Q1=%{customdata[0]}<br>Q2=%{customdata[1]}<extra></extra>',
      customdata: custom.filter((_,i)=>mask[i]),
      cliponaxis: false
    };

    const lineTrace = (lineX.length > 0) ? {
      x: lineX, y: lineY,
      mode: 'lines',
      line: { width: 2, shape: "linear" },
      name: 'Лінія фронту'
    } : null;

    const traces = lineTrace ? [allTrace, frontTrace, lineTrace] : [allTrace, frontTrace];

    Plotly.newPlot('chart', traces, {
      title: "Рядок1: Границя Парето",
      hovermode: 'closest',
      margin: {l:60, r:20, t:60, b:60},
      xaxis: { title: 'Q1 (maximize)', rangemode: 'tozero', dtick: 1, gridcolor: 'rgba(0,0,0,0.1)' },
      yaxis: { title: 'Q2 (maximize)', rangemode: 'tozero', dtick: 1, gridcolor: 'rgba(0,0,0,0.1)' },
      legend: { orientation: 'h', x: 0.5, xanchor: 'center' }
    }, {displaylogo:false});
  </script>
</body></html>